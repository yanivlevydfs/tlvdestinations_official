{% extends "base.html" %}
{% block head %}
<link rel="canonical" href="https://fly-tlv.com/destinations" />
<link rel="alternate" hreflang="en" href="https://fly-tlv.com/destinations" />
<link rel="alternate" hreflang="he" href="https://fly-tlv.com/destinations?lang=he" />
<link rel="stylesheet" href="{{ url_for('static', path='css/app.css') }}?v={{ time.time() }}">
  <!-- âœ… Page-specific SEO -->
  <meta name="description" content="Live flight statistics from Ben Gurion Airport (TLV). Explore the top destinations, airlines, countries, and cities with departures and arrivals updated in real-time.">
  <meta name="keywords" content="Ben Gurion Airport, TLV flights, flight statistics, top destinations, airlines, arrivals, departures, Tel Aviv flights">

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Ben Gurion Airport â€” Current Flight Statistics | Fly-TLV">
  <meta property="og:description" content="See live statistics from Ben Gurion Airport (TLV). Explore top countries, cities, and airlines for departures and arrivals.">
  <meta property="og:url" content="https://fly-tlv.com/destinations">
  <meta property="og:image" content="https://fly-tlv.com/static/og/flytlv_og.jpg">
  <meta property="og:image:alt" content="Ben Gurion Airport TLV statistics dashboard">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Ben Gurion Airport â€” Current Flight Statistics | Fly-TLV">
  <meta name="twitter:description" content="Live departures and arrivals statistics from TLV airport. Updated charts with top destinations and airlines.">
  <meta name="twitter:image" content="https://fly-tlv.com/static/og/flytlv_og.jpg">
  <meta name="twitter:image:alt" content="TLV airport stats overview">

  <!-- Structured Data: Dataset -->
<script type="application/ld+json">
[
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Fly TLV â€” Worldwide Destinations Explorer",
    "url": "https://fly-tlv.com/",
    "inLanguage": "en-US",
    "description": "Explore all destinations worldwide from Tel Aviv (TLV) with airlines, maps, distances, and travel data."
  },
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Fly TLV â€” ×›×œ ×”×™×¢×“×™× ××ª×œ ××‘×™×‘",
    "url": "https://fly-tlv.com/?lang=he",
    "inLanguage": "he-IL",
    "description": "×’×œ×” ××ª ×›×œ ×”×™×¢×“×™× ×‘×¢×•×œ× ××ª×œ ××‘×™×‘ (TLV): ×—×‘×¨×•×ª ×ª×¢×•×¤×”, ××¤×•×ª, ××¨×—×§×™× ×•× ×ª×•× ×™ ×˜×™×¡×”."
  },
  {
    "@context": "https://schema.org",
    "@type": "SiteNavigationElement",
    "name": "Destinations Board",
    "url": "https://fly-tlv.com/destinations"
  },
  {
    "@context": "https://schema.org",
    "@type": "SiteNavigationElement",
    "name": "×œ×•×— ×™×¢×“×™×",
    "url": "https://fly-tlv.com/destinations?lang=he"
  },
  {
    "@context": "https://schema.org",
    "@type": "SiteNavigationElement",
    "name": "World Map",
    "url": "https://fly-tlv.com/map"
  },
  {
    "@context": "https://schema.org",
    "@type": "SiteNavigationElement",
    "name": "××¤×ª ×™×¢×“×™×",
    "url": "https://fly-tlv.com/map?lang=he"
  },
  {
    "@context": "https://schema.org",
    "@type": "SiteNavigationElement",
    "name": "Travel Warnings",
    "url": "https://fly-tlv.com/travel-warnings"
  },
  {
    "@context": "https://schema.org",
    "@type": "SiteNavigationElement",
    "name": "××–×”×¨×•×ª ××¡×¢",
    "url": "https://fly-tlv.com/travel-warnings?lang=he"
  },
  {
    "@context": "https://schema.org",
    "@type": "SiteNavigationElement",
    "name": "Chat",
    "url": "https://fly-tlv.com/chat"
  },
  {
    "@context": "https://schema.org",
    "@type": "SiteNavigationElement",
    "name": "×¦×³××˜",
    "url": "https://fly-tlv.com/chat?lang=he"
  },
  {
    "@context": "https://schema.org",
    "@type": "SiteNavigationElement",
    "name": "About",
    "url": "https://fly-tlv.com/about"
  },
  {
    "@context": "https://schema.org",
    "@type": "SiteNavigationElement",
    "name": "×¢×œ×™× ×•",
    "url": "https://fly-tlv.com/about?lang=he"
  },
  {
    "@context": "https://schema.org",
    "@type": "SiteNavigationElement",
    "name": "Privacy Policy",
    "url": "https://fly-tlv.com/privacy"
  },
  {
    "@context": "https://schema.org",
    "@type": "SiteNavigationElement",
    "name": "××“×™× ×™×•×ª ×¤×¨×˜×™×•×ª",
    "url": "https://fly-tlv.com/privacy?lang=he"
  },
  {
    "@context": "https://schema.org",
    "@type": "SiteNavigationElement",
    "name": "Contact",
    "url": "https://fly-tlv.com/contact"
  },
  {
    "@context": "https://schema.org",
    "@type": "SiteNavigationElement",
    "name": "×¦×•×¨ ×§×©×¨",
    "url": "https://fly-tlv.com/contact?lang=he"
  },
  {
    "@context": "https://schema.org",
    "@type": "SiteNavigationElement",
    "name": "Sitemap",
    "url": "https://fly-tlv.com/sitemap.xml"
  },
  {
    "@context": "https://schema.org",
    "@type": "SiteNavigationElement",
    "name": "××¤×ª ××ª×¨",
    "url": "https://fly-tlv.com/sitemap.xml"
  },
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "What is Fly TLV?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Fly TLV is a travel insights platform listing all direct flight destinations from Ben Gurion Airport (TLV) with airlines, flight times, and distances."
        }
      },
      {
        "@type": "Question",
        "name": "Can I book flights through Fly TLV?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "No. Fly TLV does not sell tickets but provides verified links to airlines and booking sites."
        }
      },
      {
        "@type": "Question",
        "name": "Which airlines fly from Tel Aviv?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Airlines from TLV include El Al, Arkia, Israir, Lufthansa, Emirates, Turkish Airlines, and more."
        }
      },
      {
        "@type": "Question",
        "name": "Are the destinations updated regularly?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Yes. Fly TLV updates its data frequently according to official airline schedules."
        }
      },
      {
        "@type": "Question",
        "name": "What is the difference between direct and nonstop flights?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Nonstop flights have no stops between TLV and the destination; direct flights may include short stopovers but stay on the same plane."
        }
      }
    ]
  }
]
</script>
<style>
/* Light hover effect (unchanged) */
.hover-opacity:hover {
  background-color: #f8f9fa;
  box-shadow: 0 0.25rem 0.5rem rgba(0, 0, 0, 0.04);
  opacity: 0.9;
}
/* âœ… GLOBAL dark mode base */
body.dark-mode {
  color: #ffffff;
  background-color: #121212;
}

/* âœ… Fix card background and text */
body.dark-mode .card,
body.dark-mode .card-header,
body.dark-mode .card-footer,
body.dark-mode .card-body {
  background-color: #1e1e1e !important;
  color: #ffffff !important;
  border-color: #2c2c2c !important;
}

/* âœ… Force ALL inner text to white, including <p>, <strong>, <small>, etc. */
body.dark-mode .card *,
body.dark-mode .card-body *,
body.dark-mode .card-body p,
body.dark-mode .card-body small,
body.dark-mode .card-body .small,
body.dark-mode .card-body strong,
body.dark-mode .card-body span {
  color: #ffffff !important;
}

/* âœ… Muted text should still be dimmed, but not black */
body.dark-mode .card-body .text-muted {
  color: #b0b0b0 !important;
}

/* âœ… Fix background and text inside Wikipedia box */
body.dark-mode #city-overview,
body.dark-mode .bg-light {
  background-color: #2a2a2a !important;
  color: #ffffff !important;
}

/* âœ… Form elements */
body.dark-mode select.form-select,
body.dark-mode input,
body.dark-mode textarea {
  background-color: #2a2a2a !important;
  color: #ffffff !important;
  border-color: #444 !important;
}


</style>

{% endblock %}

{% block content %}

<div class="container mt-5">
  <div class="card shadow-lg">

    <!-- âœ… Button aligned right -->
    <div class="card-body pt-3 pb-0">
      <div class="text-end">
        <a href="/" class="btn btn-outline-primary btn-sm">
          â† {{ 'Back to table' if lang != 'he' else '×—×–×¨×” ×œ×˜×‘×œ×”' }}
        </a>
      </div>
    </div>
    <!-- âœ… Horizontal line divider -->
    <hr class="mt-2 mb-0">
    <!-- ğŸ”· Blue title/header bar -->
	<div class="card-header bg-primary text-white d-flex justify-content-between align-items-center flex-wrap">
	  <h3 class="mb-0 fs-5">
		âœˆï¸ TLV to {{ destination.Name }} ({{ destination.IATA }})
	  </h3>
	  <span class="badge bg-light text-dark">
		{{ destination.Country }}
		{% if destination.CountryISO %}
		  <img src="https://flagcdn.com/24x18/{{ destination.CountryISO | lower }}.png"
			   alt="{{ destination.Country or 'Country flag' }}" class="ms-1" />
		{% endif %}
	  </span>
	</div>

    <!-- Body -->
<div class="card-body">
  <!-- Compact Quick info grid -->
  <div class="row text-center mb-3">
    <div class="col-md-3">
      <i class="bi bi-geo-alt-fill text-danger" style="font-size: 1.3rem;"></i>
      <p class="mb-0 small"><strong>{{ destination.City }}</strong></p>
      <small class="text-muted">{{ 'City' if lang != 'he' else '×¢×™×¨' }}</small>
    </div>
    <div class="col-md-3">
      <i class="bi bi-signpost-split-fill text-success" style="font-size: 1.3rem;"></i>
      <p class="mb-0 small">{{ destination.IATA }}</p>
      <small class="text-muted">IATA</small>
    </div>
    <div class="col-md-3">
      <i class="bi bi-rulers text-primary" style="font-size: 1.3rem;"></i>
      <p class="mb-0 small">{{ "%.1f"|format(destination.Distance_km or 0) }} km</p>
      <small class="text-muted">{{ 'Distance' if lang != 'he' else '××¨×—×§' }}</small>
    </div>
    <div class="col-md-3">
      <i class="bi bi-clock-history text-warning" style="font-size: 1.3rem;"></i>
      <p class="mb-0 small">{{ destination.FlightTime_hr or "â€”" }}</p>
      <small class="text-muted">{{ 'Flight Time' if lang != 'he' else '××©×š ×˜×™×¡×”' }}</small>
    </div>
  </div>


      <!-- Coordinates -->
      <p>
        <strong>{{ 'Coordinates' if lang != 'he' else '×§×•××•×¨×“×™× ×˜×•×ª' }}:</strong>
        {{ destination.lat }}, {{ destination.lon }}
      </p>

      <!-- Airlines -->
<h6 class="mt-4 mb-2 fw-semibold">
  <i class="bi bi-airplane-engines me-1 text-primary"></i>
  {{ 'Airlines' if lang != 'he' else '×—×‘×¨×•×ª ×ª×¢×•×¤×”' }}:
</h6>

{% if destination.Airlines %}
  <div class="d-flex flex-wrap gap-2">
    {% for airline in destination.Airlines %}
      {% set airline_name = airline.strip().title() %}
      {% set website = AIRLINE_WEBSITES.get(airline_name) %}
      {% if website %}
        <a href="{{ website }}"
           target="_blank"
           rel="noopener"
           class="airline-chip text-decoration-none"
           style="transition: all 0.2s ease-in-out;"
           title="Visit {{ airline_name | e }} website">
          <span>{{ airline_name }}</span>
          <i class="bi bi-box-arrow-up-right ms-2 opacity-50"></i>
        </a>
      {% else %}
        <a href="https://www.google.com/search?q={{ airline_name | urlencode }}"
           target="_blank"
           rel="noopener"
           class="airline-chip text-decoration-none"
           style="transition: all 0.2s ease-in-out;"
           title="Search for {{ airline_name | e }} on Google">
          <span>{{ airline_name }}</span>
          <i class="bi bi-search ms-2 opacity-50"></i>
        </a>
      {% endif %}
    {% endfor %}
  </div>
{% else %}
  <p class="text-muted">â€”</p>
{% endif %}

<div class="card shadow-sm d-none d-lg-block mt-4 mb-4" aria-label="Advertisement">
  <div class="card-header small text-muted fw-semibold">
    <i class="bi bi-airplane-engines me-1 text-primary"></i>Flight Search
  </div>
<div class="card-body text-center p-0" style="overflow: hidden;">
  <script
    async
    src="https://tpembd.com/content?currency=usd&trs=461563&shmarker=674907.flight_bannerindex&show_hotels=true&powered_by=true&locale=en&searchUrl=www.aviasales.com%2Fsearch&primary_override=%2332a8dd&color_button=%2332a8dd&color_icons=%2332a8dd&dark=%23262626&light=%23FFFFFF&secondary=%23FFFFFF&special=%23C4C4C4&color_focused=%2332a8dd&border_radius=0&no_labels=true&plain=true&origin=TLV&destination={{ destination.IATA }}&promo_id=7879&campaign_id=100"
    charset="utf-8">
  </script>
</div>

      <!-- Wikipedia City Overview -->
      <div class="mt-5">
        <h5><i class="bi bi-info-circle"></i>
          {{ 'About ' ~ destination.City if lang != 'he' else '×¢×œ ' ~ destination.City }}
        </h5>
        <div id="city-overview" class="border rounded p-3 bg-light">
          {{ 'Loading city info...' if lang != 'he' else '×˜×•×¢×Ÿ ××™×“×¢ ×¢×œ ×”×¢×™×¨...' }}
        </div>
      </div>
	<!-- ğŸŒ¤ï¸ Weather for Destination -->
		<div class="mt-5">
		  <h5>
			<i class="bi bi-cloud-sun"></i>
			{{ ('Weather in ' if lang != 'he' else '××–×’ ×”××•×•×™×¨ ×‘Ö¾') ~ destination.City }}
		  </h5>

		  <div class="border rounded p-2 bg-light">
			<iframe
			  width="100%"
			  height="450"
			  frameborder="0"
			  src="https://embed.windy.com/embed2.html?lat={{ destination.lat }}&lon={{ destination.lon }}&detailLat={{ destination.lat }}&detailLon={{ destination.lon }}&width=100%&height=450&zoom=8&level=surface&overlay=wind&menu=&message=true&marker=&calendar=24&pressure=false&type=map&location=coordinates&detail=true&metricWind=default&metricTemp=default&radarRange=-1"
			  allowfullscreen
			  loading="lazy"
			  title="{{ destination.City }} Weather from Windy">
			</iframe>
		  </div>
		</div>

      <!-- Map -->
	{% if destination.lat and destination.lon %}
	  <div class="mt-4">
		<h5>
		  <i class="bi bi-map"></i>
		  {{ 'Location Map' if lang != 'he' else '××¤×ª ×™×¢×“' }}
		</h5>
		<iframe
		  width="100%"
		  height="350"
		  frameborder="0"
		  style="border:0; border-radius: 0.5rem;"
		  src="https://www.openstreetmap.org/export/embed.html?bbox={{ destination.lon | float - 0.5 }}%2C{{ destination.lat | float - 0.5 }}%2C{{ destination.lon | float + 0.5 }}%2C{{ destination.lat | float + 0.5 }}&layer=mapnik&marker={{ destination.lat }}%2C{{ destination.lon }}"
		  allowfullscreen
		  loading="lazy"
		  referrerpolicy="no-referrer"
		  aria-label="Map showing location of destination"
		></iframe>
	  </div>
	{% endif %}
    </div>
	<div class="card-footer text-start">
	  <a href="/" class="btn btn-outline-primary">
		â† {{ 'Back to table' if lang != 'he' else '×—×–×¨×” ×œ×˜×‘×œ×”' }}
	  </a>
	</div>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", async () => {
  const city = "{{ destination.City|urlencode }}";
  const url = `https://en.wikipedia.org/api/rest_v1/page/summary/${city}`;
  try {
    const res = await fetch(url);
    if (!res.ok) throw new Error("Wiki not found");
    const data = await res.json();

    const box = document.getElementById("city-overview");
    let html = "";

    if (data.thumbnail) {
      html += `
        <div class="row">
          <div class="col-12 col-md-auto text-center">
            <img src="${data.thumbnail.source}" 
                 alt="${data.title}" 
                 class="img-fluid rounded shadow-sm mb-3 me-md-3" 
                 style="max-width:180px;">
          </div>
          <div class="col">
      `;
    }

    html += `<strong>${data.title}</strong><br>`;
    if (data.description) {
      html += `<em>${data.description}</em><br>`;
    }
    html += `<p>${data.extract}</p>`;

    if (data.thumbnail) {
      html += `</div></div>`; // âœ… close the row
    }

    box.innerHTML = html;
  } catch (err) {
    document.getElementById("city-overview").innerHTML =
      "{{ 'No Wikipedia data found.' if lang != 'he' else '×œ× × ××¦× ××™×“×¢ ×‘×•×•×™×§×™×¤×“×™×”.' }}";
    console.error(err);
  }
});
</script>


{% endblock %}

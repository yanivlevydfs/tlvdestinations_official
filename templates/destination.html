{% extends "base.html" %}
{% block head %}

<link rel="stylesheet" href="{{ url_for('static', path='css/app.css') }}?v={{ time.time() }}">
<!-- âœ… Page-specific SEO -->
<meta name="description"
  content="Live flight statistics from Ben Gurion Airport (TLV). Explore the top destinations, airlines, countries, and cities with departures and arrivals updated in real-time.">
<meta name="keywords"
  content="Ben Gurion Airport, TLV flights, flight statistics, top destinations, airlines, arrivals, departures, Tel Aviv flights">

<!-- Open Graph -->
<meta property="og:type" content="website">
<meta property="og:title" content="Ben Gurion Airport â€” Current Flight Statistics | Fly-TLV">
<meta property="og:description"
  content="See live statistics from Ben Gurion Airport (TLV). Explore top countries, cities, and airlines for departures and arrivals.">
<meta property="og:url" content="https://fly-tlv.com/destinations">
<meta property="og:image" content="https://fly-tlv.com/static/og/flytlv_og.jpg">
<meta property="og:image:alt" content="Ben Gurion Airport TLV statistics dashboard">

<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Ben Gurion Airport â€” Current Flight Statistics | Fly-TLV">
<meta name="twitter:description"
  content="Live departures and arrivals statistics from TLV airport. Updated charts with top destinations and airlines.">
<meta name="twitter:image" content="https://fly-tlv.com/static/og/flytlv_og.jpg">
<meta name="twitter:image:alt" content="TLV airport stats overview">
<link rel="canonical"
  href="https://fly-tlv.com/destinations/{{ destination.IATA }}{{ '' if lang != 'he' else '?lang=he' }}" />
<link rel="alternate" href="https://fly-tlv.com/destinations/{{ destination.IATA }}" hreflang="en" />
<link rel="alternate" href="https://fly-tlv.com/destinations/{{ destination.IATA }}?lang=he" hreflang="he" />
<link rel="alternate" href="https://fly-tlv.com/destinations/{{ destination.IATA }}" hreflang="x-default" />


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "Organization",
      "@id": "https://fly-tlv.com/#org",
      "name": "Fly TLV",
      "url": "https://fly-tlv.com/",
      "logo": {
        "@type": "ImageObject",
        "url": "https://fly-tlv.com/static/icons/favicon-512.png",
        "width": 512,
        "height": 512
      }
    },
    {
      "@type": "WebSite",
      "@id": "https://fly-tlv.com/#website",
      "name": "Fly TLV â€” Direct Destinations Explorer",
      "url": "https://fly-tlv.com/",
      "publisher": { "@id": "https://fly-tlv.com/#org" },
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://fly-tlv.com/?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    },
    {
      "@type": "WebPage",
      "@id": "https://fly-tlv.com/destinations/{{ destination.IATA }}/#page",
      "url": "https://fly-tlv.com/destinations/{{ destination.IATA }}{% if lang=='he' %}?lang=he{% endif %}",
      "name": "{% if lang!='he' %}Flights from Tel Aviv (TLV) to {{ destination.City }} ({{ destination.IATA }}){% else %}×˜×™×¡×•×ª ××ª×œ ××‘×™×‘ (TLV) ××œ {{ destination.City }}{% endif %}",
      "inLanguage": "{% if lang=='he' %}he-IL{% else %}en-US{% endif %}",
      "description": "{% if lang!='he' %}Explore direct flights from TLV to {{ destination.City }} â€” airlines, distance, flight time, map, and travel data.{% else %}×˜×™×¡×•×ª ×™×©×™×¨×•×ª ××ª×œ ××‘×™×‘ ××œ {{ destination.City }} â€” ×—×‘×¨×•×ª ×ª×¢×•×¤×”, ××¨×—×§, ×–××Ÿ ×˜×™×¡×” ×•××™×“×¢ ×©×™××•×©×™.{% endif %}",
      "publisher": { "@id": "https://fly-tlv.com/#org" },
      "isPartOf": { "@id": "https://fly-tlv.com/#website" }
    },
    {
      "@type": "Flight",
      "@id": "https://fly-tlv.com/#flight-{{ destination.IATA }}",
      "name": "TLV â†’ {{ destination.IATA }} Direct Flight",
      "provider": { "@id": "https://fly-tlv.com/#org" },
      "departureAirport": {
        "@type": "Airport",
        "name": "Ben Gurion Airport",
        "iataCode": "TLV",
        "geo": { "@type": "GeoCoordinates", "latitude": 32.0, "longitude": 34.87 }
      },
	"arrivalAirport": {
	  "@type": "Airport",
	  "name": "{{ destination.Airport or destination.Name }}",
	  "iataCode": "{{ destination.IATA }}",
	  "geo": {
		"@type": "GeoCoordinates",
		"latitude": {{ destination.lat | default(0, true) }},
		"longitude": {{ destination.lon | default(0, true) }}
	  }
		},
      "flightDistance": {
        "@type": "QuantitativeValue",
        "value": {{ destination.Distance_km or 0 }},
        "unitText": "km"
      },
      "operatedBy": [
        {% for airline in destination.Airlines %}
        { "@type": "Airline", "name": "{{ airline | trim }}" }{% if not loop.last %},{% endif %}
        {% endfor %}
      ]
    },
    {
      "@type": "TouristDestination",
      "@id": "https://fly-tlv.com/#dest-{{ destination.IATA }}",
      "name": "{{ destination.City }}",
      "description": "Direct destination reachable from TLV.",
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": {{ destination.lat }},
        "longitude": {{ destination.lon }}
      },
      "containedInPlace": {
        "@type": "Country",
        "name": "{{ destination.Country }}"
      }
    },
    {
      "@type": "BreadcrumbList",
      "itemListElement": [
        { "@type": "ListItem", "position": 1, "name": "{% if lang!='he' %}Home{% else %}×‘×™×ª{% endif %}", "item": "https://fly-tlv.com/{% if lang=='he' %}?lang=he{% endif %}" },
        { "@type": "ListItem", "position": 2, "name": "{% if lang!='he' %}Destinations{% else %}×™×¢×“×™×{% endif %}", "item": "https://fly-tlv.com/destinations{% if lang=='he' %}?lang=he{% endif %}" },
        { "@type": "ListItem", "position": 3, "name": "{{ destination.City }} ({{ destination.IATA }})", "item": "https://fly-tlv.com/destinations/{{ destination.IATA }}{% if lang=='he' %}?lang=he{% endif %}" }
      ]
    },
    {
      "@type": "ItemList",
      "name": "Site Navigation",
      "itemListElement": [
        { "@type": "ListItem", "position": 1, "item": { "@type": "SiteNavigationElement", "name": "Home", "url": "https://fly-tlv.com/" } },
        { "@type": "ListItem", "position": 2, "item": { "@type": "SiteNavigationElement", "name": "×‘×™×ª", "url": "https://fly-tlv.com/?lang=he" } },
        { "@type": "ListItem", "position": 3, "item": { "@type": "SiteNavigationElement", "name": "Stats", "url": "https://fly-tlv.com/stats" } },
        { "@type": "ListItem", "position": 4, "item": { "@type": "SiteNavigationElement", "name": "× ×ª×•× ×™ ×©×“×”", "url": "https://fly-tlv.com/stats?lang=he" } },
        { "@type": "ListItem", "position": 5, "item": { "@type": "SiteNavigationElement", "name": "Flights", "url": "https://fly-tlv.com/flights" } },
        { "@type": "ListItem", "position": 6, "item": { "@type": "SiteNavigationElement", "name": "×˜×™×¡×•×ª", "url": "https://fly-tlv.com/flights?lang=he" } },
        { "@type": "ListItem", "position": 7, "item": { "@type": "SiteNavigationElement", "name": "World Map", "url": "https://fly-tlv.com/map" } },
        { "@type": "ListItem", "position": 8, "item": { "@type": "SiteNavigationElement", "name": "××¤×ª ×™×¢×“×™×", "url": "https://fly-tlv.com/map?lang=he" } },
        { "@type": "ListItem", "position": 9, "item": { "@type": "SiteNavigationElement", "name": "Travel Warnings", "url": "https://fly-tlv.com/travel-warnings" } },
        { "@type": "ListItem", "position": 10, "item": { "@type": "SiteNavigationElement", "name": "××–×”×¨×•×ª ××¡×¢", "url": "https://fly-tlv.com/travel-warnings?lang=he" } },
        { "@type": "ListItem", "position": 11, "item": { "@type": "SiteNavigationElement", "name": "Chat", "url": "https://fly-tlv.com/chat" } },
        { "@type": "ListItem", "position": 12, "item": { "@type": "SiteNavigationElement", "name": "×¦×³××˜", "url": "https://fly-tlv.com/chat?lang=he" } },
        { "@type": "ListItem", "position": 13, "item": { "@type": "SiteNavigationElement", "name": "About", "url": "https://fly-tlv.com/about" } },
        { "@type": "ListItem", "position": 14, "item": { "@type": "SiteNavigationElement", "name": "×¢×œ×™× ×•", "url": "https://fly-tlv.com/about?lang=he" } },
        { "@type": "ListItem", "position": 15, "item": { "@type": "SiteNavigationElement", "name": "Direct vs Nonstop", "url": "https://fly-tlv.com/direct-vs-nonstop" } },
        { "@type": "ListItem", "position": 16, "item": { "@type": "SiteNavigationElement", "name": "×™×©×™×¨ ××•×œ ×œ×œ×-×¢×¦×™×¨×•×ª", "url": "https://fly-tlv.com/direct-vs-nonstop?lang=he" } },
        { "@type": "ListItem", "position": 17, "item": { "@type": "SiteNavigationElement", "name": "Glossary", "url": "https://fly-tlv.com/glossary" } },
        { "@type": "ListItem", "position": 18, "item": { "@type": "SiteNavigationElement", "name": "××™×œ×•×Ÿ ××•× ×—×™×", "url": "https://fly-tlv.com/glossary?lang=he" } },
        { "@type": "ListItem", "position": 19, "item": { "@type": "SiteNavigationElement", "name": "Privacy Policy", "url": "https://fly-tlv.com/privacy" } },
        { "@type": "ListItem", "position": 20, "item": { "@type": "SiteNavigationElement", "name": "××“×™× ×™×•×ª ×¤×¨×˜×™×•×ª", "url": "https://fly-tlv.com/privacy?lang=he" } },
        { "@type": "ListItem", "position": 21, "item": { "@type": "SiteNavigationElement", "name": "Accessibility", "url": "https://fly-tlv.com/accessibility" } },
        { "@type": "ListItem", "position": 22, "item": { "@type": "SiteNavigationElement", "name": "× ×’×™×©×•×ª", "url": "https://fly-tlv.com/accessibility?lang=he" } },
        { "@type": "ListItem", "position": 23, "item": { "@type": "SiteNavigationElement", "name": "Contact", "url": "https://fly-tlv.com/contact" } },
        { "@type": "ListItem", "position": 24, "item": { "@type": "SiteNavigationElement", "name": "×¦×•×¨ ×§×©×¨", "url": "https://fly-tlv.com/contact?lang=he" } },
        { "@type": "ListItem", "position": 25, "item": { "@type": "SiteNavigationElement", "name": "Sitemap", "url": "https://fly-tlv.com/sitemap.xml" } },
        { "@type": "ListItem", "position": 26, "item": { "@type": "SiteNavigationElement", "name": "××¤×ª ××ª×¨", "url": "https://fly-tlv.com/sitemap.xml?lang=he" } }
      ]
    }
  ]
}
</script>


<style>
  /* ============================================================ 
     Slick 2026 â€” Glassmorphism & Accents
     ============================================================ */
  .glass-card {
    background: rgba(255, 255, 255, 0.7) !important;
    backdrop-filter: blur(12px) saturate(180%);
    -webkit-backdrop-filter: blur(12px) saturate(180%);
    border: 1px solid rgba(255, 255, 255, 0.3) !important;
    box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.07);
    border-radius: 1.25rem;
  }

  body.dark-mode .glass-card {
    background: rgba(18, 18, 18, 0.75) !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
    box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.4);
  }

  .accent-header {
    background: var(--accent) !important;
    color: #fff !important;
    border: none !important;
    box-shadow: var(--accent-glow);
    padding: 1.25rem;
  }

  .airline-chip {
    padding: 6px 14px;
    background: rgba(124, 58, 237, 0.08);
    border: 1px solid rgba(124, 58, 237, 0.25);
    border-radius: 50px;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .airline-logo-sm {
    width: 20px;
    height: 20px;
    object-fit: contain;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
  }

  .status-badge {
    padding: 4px 10px;
    border-radius: 6px;
    font-weight: 600;
    text-transform: capitalize;
    font-size: 0.8rem;
  }

  .status-on-time {
    background: rgba(16, 185, 129, 0.1);
    color: #059669;
  }

  .status-departed {
    background: rgba(59, 130, 246, 0.1);
    color: #2563eb;
  }

  .status-delayed {
    background: rgba(245, 158, 11, 0.1);
    color: #d97706;
  }

  .status-landed {
    background: rgba(107, 114, 128, 0.1);
    color: #4b5563;
  }

  .quick-info-box {
    padding: 1rem;
    border-radius: 1rem;
    background: rgba(243, 244, 246, 0.5);
    border: 1px solid transparent;
    transition: all 0.25s ease;
  }

  body.dark-mode .quick-info-box {
    background: rgba(255, 255, 255, 0.03);
  }

  .quick-info-box:hover {
    background: rgba(124, 58, 237, 0.05);
    border-color: rgba(124, 58, 237, 0.2);
    transform: translateY(-2px);
  }
</style>

{% endblock %}

{% block content %}

<div class="container mt-5">
  <div class="card glass-card shadow-lg border-0 overflow-hidden">
    <!-- âœ… Navigation Bar inside card -->
    <div class="card-body py-3 bg-white bg-opacity-10 border-bottom">
      <div class="d-flex justify-content-between align-items-center">
        <a href="{{ '/' if lang != 'he' else '/?lang=he' }}"
          class="btn btn-link text-decoration-none p-0 d-flex align-items-center gap-2"
          dir="{{ 'rtl' if lang == 'he' else 'ltr' }}">
          <i class="bi {{ 'bi-arrow-right' if lang == 'he' else 'bi-arrow-left' }} fs-5"></i>
          <span class="fw-medium">{{ 'Back to Table' if lang != 'he' else '×—×–×¨×” ×œ×˜×‘×œ×”' }}</span>
        </a>

        <a href="{{ '/travel-questionnaire' if lang != 'he' else '/travel-questionnaire?lang=he' }}"
          class="btn btn-cta btn-sm px-3" dir="{{ 'rtl' if lang == 'he' else 'ltr' }}">
          {% if lang == 'he' %}
          ğŸš€ ××“×¨×™×š × ×¡×™×¢×”
          {% else %}
          ğŸš€ Travel Guide
          {% endif %}
        </a>
      </div>
    </div>

    <!-- ğŸ”· Hero/Header Section -->
    <div class="accent-header">
      <div class="d-flex justify-content-between align-items-center flex-wrap gap-3">
        <div>
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb breadcrumb-dark mb-1 small text-white-50">
              <li class="breadcrumb-item">{{ 'TLV' if lang != 'he' else '× ×ª×‘×´×’' }}</li>
              <li class="breadcrumb-item active text-white" aria-current="page">{{ destination.IATA }}</li>
            </ol>
          </nav>
          <h1 class="h2 mb-0 fw-bold">
            {{ 'Flights to' if lang != 'he' else '×˜×™×¡×•×ª ××œ' }} {{ destination.Name }}
          </h1>
        </div>
        <div class="d-flex align-items-center gap-3">
          <span
            class="badge bg-white bg-opacity-25 text-white border border-white border-opacity-25 fs-6 px-3 py-2 rounded-pill d-flex align-items-center gap-2">
            {{ destination.Country }}
            {% if destination.CountryISO %}
            <img src="https://flagcdn.com/24x18/{{ destination.CountryISO | lower }}.webp" width="20" class="rounded-sm"
              alt="">
            {% endif %}
          </span>
        </div>
      </div>
    </div>

    <!-- Body -->
    <div class="card-body p-4">
      <!-- Compact Quick info grid -->
      <div class="row g-4 mb-5 text-center">
        <div class="col-6 col-md-3">
          <div class="quick-info-box h-100 d-flex flex-column align-items-center justify-content-center">
            <i class="bi bi-geo-alt-fill text-danger fs-3 mb-2"></i>
            <span class="fw-bold d-block">{{ destination.City }}</span>
            <small class="text-muted opacity-75">{{ 'City' if lang != 'he' else '×¢×™×¨' }}</small>
          </div>
        </div>
        <div class="col-6 col-md-3">
          <div class="quick-info-box h-100 d-flex flex-column align-items-center justify-content-center">
            <i class="bi bi-tag-fill text-success fs-3 mb-2"></i>
            <span class="fw-bold d-block">{{ destination.IATA }}</span>
            <small class="text-muted opacity-75">IATA</small>
          </div>
        </div>
        <div class="col-6 col-md-3">
          <div class="quick-info-box h-100 d-flex flex-column align-items-center justify-content-center">
            <i class="bi bi-broadcast fs-3 text-primary mb-2"></i>
            <span class="fw-bold d-block">{{ "%.1f"|format(destination.Distance_km or 0) }} km</span>
            <small class="text-muted opacity-75">{{ 'Distance' if lang != 'he' else '××¨×—×§' }}</small>
          </div>
        </div>
        <div class="col-6 col-md-3">
          <div class="quick-info-box h-100 d-flex flex-column align-items-center justify-content-center">
            <i class="bi bi-hourglass-split fs-3 text-warning mb-2"></i>
            <span class="fw-bold d-block">{{ destination.FlightTime_hr or "â€”" }}</span>
            <small class="text-muted opacity-75">{{ 'Est. Duration' if lang != 'he' else '××©×š ×–××Ÿ' }}</small>
          </div>
        </div>
      </div>

      <div class="row g-4">
        <!-- Left Column: Details -->
        <div class="col-lg-7">

          <div class="mb-4">
            <h5 class="fw-bold mb-3">{{ 'Airlines Serving this Route' if lang != 'he' else '×—×‘×¨×•×ª ×ª×¢×•×¤×” ×‘××¡×œ×•×œ ×©×™×¨×•×ª ×–×”'
              }}</h5>
            <div class="d-flex flex-wrap gap-3">
              {% if destination.Airlines %}
              {% for i in range(destination.Airlines | length) %}
              {% set airline_name = destination.Airlines[i].strip() %}
              {% set airline_code = destination.AirlineCodes[i] if destination.AirlineCodes and i <
                destination.AirlineCodes|length else None %} {% set website=AIRLINE_WEBSITES.get(airline_name) %} <a
                href="{{ website if website else 'https://www.google.com/search?q=' ~ airline_name | urlencode }}"
                target="_blank" rel="noopener" class="airline-chip text-decoration-none" title="{{ airline_name }}">
                {% if airline_code %}
                <img src="{{ url_for('static', path='airlines_logo/airline_logos/' ~ airline_code | lower ~ '.webp') }}"
                  class="airline-logo-sm" onerror="this.style.display='none'" alt="">
                {% endif %}
                <span class="fw-medium">{{ airline_name }}</span>
                {% if airline_code %}
                <small class="text-muted opacity-50">{{ airline_code | upper }}</small>
                {% endif %}
                <i class="bi bi-box-arrow-up-right ms-1 small opacity-50"></i>
                </a>
                {% endfor %}
                {% else %}
                <p class="text-muted">{{ 'No active airline data' if lang != 'he' else '××™×Ÿ × ×ª×•× ×™ ×—×‘×¨×ª ×ª×¢×•×¤×” ×¤×¢×™×œ×™×' }}
                </p>
                {% endif %}
            </div>
          </div>

          <!-- Flight Numbers Section -->
          {% if destination.FlightNumbers %}
          <div class="mb-4">
            <h5 class="fw-bold mb-3">{{ 'Active Flight Numbers' if lang != 'he' else '××¡×¤×¨×™ ×˜×™×¡×•×ª ×¤×¢×™×œ×™×' }}</h5>
            <div class="d-flex flex-wrap gap-2">
              {% for fn in destination.FlightNumbers %}
              <span class="badge bg-light border text-dark fw-normal px-2 py-1">
                <i class="bi bi-hash opacity-50"></i>{{ fn }}
              </span>
              {% endfor %}
            </div>
          </div>
          {% endif %}
        </div>

        <!-- Right Column: Context/Meta -->
        <div class="col-lg-5">
          <div class="p-3 bg-light bg-opacity-50 rounded-4 border border-dashed travel-details-card">
            <h6 class="fw-bold mb-3">{{ 'Travel Details' if lang != 'he' else '×¤×¨×˜×™ × ×¡×™×¢×”' }}</h6>
            <ul class="list-unstyled mb-0 d-flex flex-column gap-3">
              <li class="d-flex justify-content-between">
                <span class="text-muted small">{{ 'Terminal' if lang != 'he' else '×˜×¨××™× ×œ' }}</span>
                <span class="fw-bold">{{ destination.Terminals | join(', ') if destination.Terminals else 'â€”' }}</span>
              </li>
              <li class="d-flex justify-content-between">
                <span class="text-muted small">{{ 'Coordinates' if lang != 'he' else '×§×•××•×¨×“×™× ×˜×•×ª' }}</span>
                <span class="small font-monospace">{{ destination.lat }}, {{ destination.lon }}</span>
              </li>
              <li>
                <div id="warning-container" class="d-none mt-2">
                  <a class="warning-chip text-decoration-none w-100 justify-content-center">
                    <i class="bi bi-exclamation-triangle-fill"></i>
                    <span id="warning-message" class="mx-2"></span>
                    <i class="bi bi-box-arrow-up-right small opacity-50" id="warning-link-icon"
                      style="display:none;"></i>
                  </a>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="card shadow-sm d-none d-lg-block mt-4 mb-4" aria-label="Advertisement">
        <div class="card-header small text-muted fw-semibold">
          <i class="bi bi-airplane-engines me-1 text-primary"></i> Flight Search
        </div>
        <div class="card-body text-center p-0" style="overflow: hidden;">
          <script async
            src="https://tpembd.com/content?currency=ils&trs=461563&shmarker=674907.flight_bannerindex&show_hotels=true&powered_by=true&locale={{ 'he' if lang == 'he' else 'en' }}&searchUrl=www.aviasales.com%2Fsearch&primary_override=%2332a8dd&color_button=%2332a8dd&color_icons=%2332a8dd&dark=%23262626&light=%23FFFFFF&secondary=%23FFFFFF&special=%23C4C4C400&color_focused=%2332a8dd&border_radius=19&no_labels=true&plain=true&origin=TLV&destination={{ destination.IATA }}&promo_id=7879&campaign_id=100"
            charset="utf-8">
            </script>
        </div>
      </div>

      <!-- Wikipedia City Overview -->
      <div class="mt-2">
        <h5><i class="bi bi-info-circle"></i>
          {{ 'About ' ~ destination.City if lang != 'he' else '×¢×œ ' ~ destination.City }}
        </h5>
        <div id="city-overview" class="border rounded p-3 bg-light">
          {% if wiki_summary and wiki_summary.extract %}
          <div class="row">
            {% if wiki_summary.thumbnail %}
            <div class="col-12 col-md-auto text-center mb-3 mb-md-0">
              <img src="{{ wiki_summary.thumbnail }}" alt="{{ wiki_summary.title }}" class="img-fluid rounded shadow-sm"
                style="max-width:180px;">
            </div>
            {% endif %}
            <div class="col">
              <strong>{{ wiki_summary.title }}</strong><br>
              {% if wiki_summary.description %}
              <em>{{ wiki_summary.description }}</em><br>
              {% endif %}
              <p>{{ wiki_summary.extract }}</p>
              {% if wiki_summary.url %}
              <a href="{{ wiki_summary.url }}" target="_blank" rel="noopener">
                ğŸŒ {{ '×§×¨× ×¢×•×“ ×‘×•×•×™×§×™×¤×“×™×”' if lang == 'he' else 'Read more on Wikipedia' }}
              </a>
              {% endif %}
            </div>
          </div>
          {% else %}
          <div class="text-muted">
            {{ '×œ× × ××¦× ××™×“×¢ ×‘×•×•×™×§×™×¤×“×™×”.' if lang == 'he' else 'No Wikipedia data found.' }}
          </div>
          {% endif %}
        </div>
      </div>
      <!-- ğŸŒ¤ï¸ Weather for Destination -->
      <div class="mt-2">
        <h5>
          <i class="bi bi-cloud-sun"></i>
          {{ ('Weather in ' if lang != 'he' else '××–×’ ×”××•×•×™×¨ ×‘Ö¾') ~ destination.City }}
        </h5>

        <div class="border rounded p-2 bg-light">
          <iframe width="100%" height="450" frameborder="0"
            src="https://embed.windy.com/embed2.html?lat={{ destination.lat }}&lon={{ destination.lon }}&detailLat={{ destination.lat }}&detailLon={{ destination.lon }}&width=100%&height=450&zoom=8&level=surface&overlay=wind&menu=&message=true&marker=&calendar=24&pressure=false&type=map&location=coordinates&detail=true&metricWind=default&metricTemp=default&radarRange=-1"
            allowfullscreen loading="lazy" title="{{ destination.City }} Weather from Windy">
          </iframe>
        </div>
      </div>
      <div class="card shadow-sm d-none d-lg-block mt-4 mb-4" aria-label="Advertisement">
        <div class="card-header small text-muted fw-semibold">
          <i class="bi bi-sim-fill me-1 text-primary"></i>{{ 'Travel SIM Deals' if lang != 'he' else '×¢×¡×§××•×ª ×¡×™× ×œ×—×•×´×œ'
          }}
        </div>
        <div class="card-body text-center p-0" style="overflow: hidden;">
          <script async
            src="https://tpembd.com/content?trs=461563&shmarker=674907.destinationsim&locale={{ 'he' if lang == 'he' else 'en' }}&country={{ destination.Country | urlencode }}&powered_by=true&color_button=%2332a8dd&color_focused=%2332a8dd&secondary=%23FFFFFF&dark=%23262626&light=%23FFFFFF&special=%2300000000&border_radius=0&plain=false&no_labels=true&promo_id=8588&campaign_id=541"
            charset="utf-8">
            </script>
        </div>
      </div>
      <div class="card shadow-sm d-none d-lg-block mt-4 mb-4" aria-label="Advertisement">
        <div class="card-header small text-muted fw-semibold">
          <i class="bi bi-tags-fill me-1 text-primary"></i>{{ 'Flight Deals' if lang != 'he' else '××‘×¦×¢×™ ×˜×™×¡×•×ª' }}
        </div>
        <div class="card-body text-center p-0" style="overflow: hidden;">
          <script async
            src="https://tpembd.com/content?currency=ils&trs=461563&shmarker=674907.destinationsflights&color_button=%23045DA8ff&target_host=www.aviasales.com%2Fsearch&locale={{ 'he' if lang == 'he' else 'en' }}&powered_by=true&origin=TLV&destination={{ destination.IATA }}&with_fallback=true&non_direct_flights=false&min_lines=5&border_radius=0&color_background=%23FFFFFF&color_text=%23000000&color_border=%23FFFFFF&promo_id=2811&campaign_id=100"
            charset="utf-8">
            </script>
        </div>
      </div>
      <div class="card shadow-sm d-none d-lg-block mt-4 mb-4" aria-label="Advertisement">
        <div class="card-header small text-muted fw-semibold">
          <i class="bi bi-tags-fill me-1 text-primary"></i>{{ 'Find Things to Do' if lang != 'he' else '××¦××• ×“×‘×¨×™×
          ×œ×¢×©×•×ª' }}
        </div>
        <div class="card-body text-center p-0" style="overflow: hidden;">
          <script async
            src="https://tpembd.com/content?trs=461563&shmarker=674907.destination_banner_page2&iata={{ destination.IATA }}&locale=en-US&powered_by=true&campaign_id=108&promo_id=4040"
            charset="utf-8">
            </script>
        </div>
      </div>

      {% if travel_info and travel_info['pois'] %}
      <div id="poi-list" class="card shadow-sm mt-4">
        <div class="card-header text-primary fw-semibold d-flex justify-content-between align-items-center">
          <span>
            <i class="bi bi-stars me-1"></i>
            {{ 'Points of Interest' if lang != 'he' else '× ×§×•×“×•×ª ×¢× ×™×™×Ÿ' }}
          </span>
          <span class="badge bg-secondary">
            {{ travel_info['pois'] | length }}
          </span>
        </div>
        <div class="card-body">
          <div class="row row-cols-1 row-cols-md-2 g-4">
            {% for poi in travel_info['pois'] %}
            <div class="col">
              <div class="card h-100 border-0 shadow-sm">
                <div class="row g-0 align-items-center">

                  <!-- Left: Image -->
                  <div class="col-auto">
                    <div class="bg-light d-flex align-items-center justify-content-center rounded"
                      style="width:110px; height:110px; overflow:hidden;">
                      {% if poi.image and (poi.image.startswith('http') or poi.image.startswith('/')) %}
                      <img src="{{ poi.image }}" alt="{{ poi.name }}" class="img-fluid"
                        style="width:110px; height:110px; object-fit:cover;">
                      {% else %}
                      <i class="bi bi-image text-muted" style="font-size:2rem;"></i>
                      {% endif %}
                    </div>
                  </div>

                  <!-- Right: Content -->
                  <div class="col ps-3">
                    <h6 class="fw-semibold mb-1" style="line-height:1.3;">{{ poi.name }}</h6>

                    {% if poi.description %}
                    <p class="small text-muted mb-1" style="line-height:1.25;">
                      {{ poi.description[:180] ~ ('â€¦' if poi.description|length > 180 else '') }}
                    </p>
                    {% endif %}

                    {% if poi.lat and poi.lon %}
                    <div class="text-muted small">
                      <a href="https://www.google.com/maps?q={{ poi.lat }},{{ poi.lon }}" target="_blank" rel="noopener"
                        class="text-decoration-none">
                        ğŸ“ Map
                      </a>
                    </div>
                    {% endif %}
                  </div>
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
        </div>
      </div>
      {% endif %}

      <script>
        document.addEventListener("DOMContentLoaded", () => {

          const lang = "{{ lang or 'en' }}";
          const destinationCountry = "{{ destination.Country }}";

          const warningContainer = document.getElementById("warning-container");
          const warningMessage = document.getElementById("warning-message");

          const t_more = lang === "he" ? "××˜×” ×œ×‘×™×˜×—×•×Ÿ ×œ××•××™" : "National Security Council";
          const locale = lang === "he" ? "he-IL" : "en-US";

          // -------------------------------
          // Load travel warnings for country
          // -------------------------------
          async function showTravelWarnings(country) {
            try {
              const res = await fetch(`/api/warnings?country=${encodeURIComponent(country)}`);
              const data = await res.json();

              if (!data.warnings || data.warnings.length === 0) {
                warningContainer.classList.add("d-none");
                warningMessage.innerHTML = "";
                return;
              }

              const html = data.warnings.map(w => {
                const text = w.recommendations || "Missing Information.";
                const link = w.link
                  ? `<a href="${w.link}" target="_blank" rel="noopener noreferrer" class="ms-1 text-decoration-underline">[${t_more}]</a>`
                  : "";

                let dateHtml = "";
                if (w.date) {
                  const d = new Date(w.date);
                  if (!isNaN(d)) {
                    dateHtml = `<div class="text-muted small mt-1">${d.toLocaleDateString(locale, {
                      year: "numeric",
                      month: "long",
                      day: "numeric"
                    })}</div>`;
                  }
                }

                return `<p class="mb-2">${text}${link}${dateHtml}</p>`;
              }).join("");

              warningMessage.innerHTML = html;
              warningContainer.classList.remove("d-none");

            } catch (err) {
              console.error("âš ï¸ Travel warning fetch error:", err);
            }
          }

          // Auto-run for destination page
          if (destinationCountry) {
            showTravelWarnings(destinationCountry);
          }

        });
      </script>






    </div>
    <div class="card-footer text-start">
      <a href="{{ '/' if lang != 'he' else '/?lang=he' }}" class="btn btn-outline-primary">
        {% if lang == 'he' %}
        ×—×–×¨×” ×œ×˜×‘×œ×” â†’
        {% else %}
        â† Back to table
        {% endif %}
      </a>
    </div>
  </div>
</div>
{% endblock %}
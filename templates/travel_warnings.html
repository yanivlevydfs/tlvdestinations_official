{% extends "base.html" %}

{% block title %}××–×”×¨×•×ª ××¡×¢ â€” Fly TLV{% endblock %}
{% block head %}

<link rel="canonical" href="https://fly-tlv.com/travel-warnings" />
<link rel="alternate" hreflang="en" href="https://fly-tlv.com/travel-warnings" />
<link rel="alternate" hreflang="he" href="https://fly-tlv.com/travel-warnings?lang=he" />
<link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.5.0/css/responsive.bootstrap5.min.css">
<script src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script>
<script src="https://cdn.datatables.net/responsive/2.5.0/js/responsive.bootstrap5.min.js"></script>

<!-- âœ… Page-specific SEO -->
<meta name="description"
  content="Up-to-date travel warnings by country from official government sources. Check threat levels and safety recommendations for travelers from Israel and abroad.">
<meta name="keywords"
  content="travel warnings, Israel travel advisory, TLV destinations, safe travel, security alerts, Ministry of Foreign Affairs, Ben Gurion Airport">

<!-- âœ… Open Graph -->
<meta property="og:type" content="website">
<meta property="og:title" content="Travel Warnings â€” Updated by Country | Fly-TLV">
<meta property="og:description"
  content="Explore current travel warnings, threat levels, and recommendations by country â€” updated from verified government offices.">
<meta property="og:url" content="https://fly-tlv.com/travel-warnings">
<meta property="og:image" content="https://fly-tlv.com/static/og/flytlv_og.jpg">
<meta property="og:image:alt" content="Global travel risk map and advisories">

<!-- âœ… Twitter -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Travel Warnings â€” Fly TLV">
<meta name="twitter:description"
  content="Current travel warnings and risk levels by country, updated frequently from official Israeli and international sources.">
<meta name="twitter:image" content="https://fly-tlv.com/static/og/flytlv_og.jpg">
<meta name="twitter:image:alt" content="Global travel risk map and advisories">

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [

    {
      "@type": "Organization",
      "@id": "https://fly-tlv.com/#organization",
      "name": "Fly TLV",
      "url": "https://fly-tlv.com/",
      "logo": {
        "@type": "ImageObject",
        "url": "https://fly-tlv.com/static/icons/favicon-512.png",
        "width": 512,
        "height": 512
      },
      "sameAs": [
        "https://www.facebook.com/flytlv",
        "https://www.instagram.com/flytlv",
        "https://www.linkedin.com/company/flytlv"
      ]
    },

    {
      "@type": "WebSite",
      "@id": "https://fly-tlv.com/#website",
      "url": "https://fly-tlv.com/",
      "name": "Fly TLV â€” Direct Destinations from Tel Aviv",
      "description": "Explore all direct flight destinations from Tel Aviv (TLV) with airlines, maps, distances, warnings and travel data.",
      "publisher": {
        "@id": "https://fly-tlv.com/#organization"
      },
      "inLanguage": "en-US",
      "hasPart": {
        "@type": "WebPage",
        "url": "https://fly-tlv.com/?lang=he",
        "inLanguage": "he"
      },
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://fly-tlv.com/?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    },

    {
      "@type": "WebPage",
      "@id": "https://fly-tlv.com/travel-warnings/#webpage",
      "url": "https://fly-tlv.com/travel-warnings",
      "name": "Travel Warnings â€” Fly TLV",
      "description": "Up-to-date travel warnings by country from official government sources.",
      "inLanguage": "en-US",
      "isPartOf": { "@id": "https://fly-tlv.com/#website" },
      "breadcrumb": {
        "@id": "https://fly-tlv.com/travel-warnings/#breadcrumb"
      }
    },

    {
      "@type": "BreadcrumbList",
      "@id": "https://fly-tlv.com/travel-warnings/#breadcrumb",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://fly-tlv.com/"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "Travel Warnings",
          "item": "https://fly-tlv.com/travel-warnings"
        }
      ]
    },

    {
      "@type": "ItemList",
      "@id": "https://fly-tlv.com/#navigation",
      "name": "Site Navigation",
      "itemListElement": [
        { "@type": "ListItem", "position": 1, "item": { "@type": "SiteNavigationElement", "name": "Home", "url": "https://fly-tlv.com/" } },
        { "@type": "ListItem", "position": 2, "item": { "@type": "SiteNavigationElement", "name": "×‘×™×ª", "url": "https://fly-tlv.com/?lang=he" } },
        { "@type": "ListItem", "position": 3, "item": { "@type": "SiteNavigationElement", "name": "About", "url": "https://fly-tlv.com/about" } },
        { "@type": "ListItem", "position": 4, "item": { "@type": "SiteNavigationElement", "name": "×¢×œ×™× ×•", "url": "https://fly-tlv.com/about?lang=he" } },
        { "@type": "ListItem", "position": 5, "item": { "@type": "SiteNavigationElement", "name": "Accessibility", "url": "https://fly-tlv.com/accessibility" } },
        { "@type": "ListItem", "position": 6, "item": { "@type": "SiteNavigationElement", "name": "× ×’×™×©×•×ª", "url": "https://fly-tlv.com/accessibility?lang=he" } },
        { "@type": "ListItem", "position": 7, "item": { "@type": "SiteNavigationElement", "name": "Privacy Policy", "url": "https://fly-tlv.com/privacy" } },
        { "@type": "ListItem", "position": 8, "item": { "@type": "SiteNavigationElement", "name": "××“×™× ×™×•×ª ×¤×¨×˜×™×•×ª", "url": "https://fly-tlv.com/privacy?lang=he" } },
        { "@type": "ListItem", "position": 9, "item": { "@type": "SiteNavigationElement", "name": "Contact", "url": "https://fly-tlv.com/contact" } },
        { "@type": "ListItem", "position": 10, "item": { "@type": "SiteNavigationElement", "name": "×¦×•×¨ ×§×©×¨", "url": "https://fly-tlv.com/contact?lang=he" } },
        { "@type": "ListItem", "position": 11, "item": { "@type": "SiteNavigationElement", "name": "AI Bot", "url": "https://fly-tlv.com/chat" } },
        { "@type": "ListItem", "position": 12, "item": { "@type": "SiteNavigationElement", "name": "×¦×³××˜", "url": "https://fly-tlv.com/chat?lang=he" } },
        { "@type": "ListItem", "position": 13, "item": { "@type": "SiteNavigationElement", "name": "Flights", "url": "https://fly-tlv.com/destinations" } },
        { "@type": "ListItem", "position": 14, "item": { "@type": "SiteNavigationElement", "name": "×˜×™×¡×•×ª", "url": "https://fly-tlv.com/destinations?lang=he" } },
        { "@type": "ListItem", "position": 15, "item": { "@type": "SiteNavigationElement", "name": "Travel Warnings", "url": "https://fly-tlv.com/travel-warnings" } },
        { "@type": "ListItem", "position": 16, "item": { "@type": "SiteNavigationElement", "name": "××–×”×¨×•×ª ××¡×¢", "url": "https://fly-tlv.com/travel-warnings?lang=he" } },
        { "@type": "ListItem", "position": 17, "item": { "@type": "SiteNavigationElement", "name": "Map", "url": "https://fly-tlv.com/map" } },
        { "@type": "ListItem", "position": 18, "item": { "@type": "SiteNavigationElement", "name": "××¤×ª ×™×¢×“×™×", "url": "https://fly-tlv.com/map?lang=he" } },
        { "@type": "ListItem", "position": 19, "item": { "@type": "SiteNavigationElement", "name": "Glossary", "url": "https://fly-tlv.com/glossary" } },
        { "@type": "ListItem", "position": 20, "item": { "@type": "SiteNavigationElement", "name": "××™×œ×•×Ÿ ××•× ×—×™×", "url": "https://fly-tlv.com/glossary?lang=he" } },
        { "@type": "ListItem", "position": 21, "item": { "@type": "SiteNavigationElement", "name": "Statistics", "url": "https://fly-tlv.com/stats" } },
        { "@type": "ListItem", "position": 22, "item": { "@type": "SiteNavigationElement", "name": "× ×ª×•× ×™ ×©×“×”", "url": "https://fly-tlv.com/stats?lang=he" } },
        { "@type": "ListItem", "position": 23, "item": { "@type": "SiteNavigationElement", "name": "Direct vs Nonstop", "url": "https://fly-tlv.com/direct-vs-nonstop" } },
        { "@type": "ListItem", "position": 24, "item": { "@type": "SiteNavigationElement", "name": "×™×©×™×¨ ××•×œ ×œ×œ×-×¢×¦×™×¨×•×ª", "url": "https://fly-tlv.com/direct-vs-nonstop?lang=he" } },
        { "@type": "ListItem", "position": 25, "item": { "@type": "SiteNavigationElement", "name": "Terms & Conditions", "url": "https://fly-tlv.com/terms" } },
        { "@type": "ListItem", "position": 26, "item": { "@type": "SiteNavigationElement", "name": "×ª× ××™× ×•×”×’×‘×œ×•×ª", "url": "https://fly-tlv.com/terms?lang=he" } },
        { "@type": "ListItem", "position": 27, "item": { "@type": "SiteNavigationElement", "name": "Sitemap", "url": "https://fly-tlv.com/sitemap.xml" } },
        { "@type": "ListItem", "position": 28, "item": { "@type": "SiteNavigationElement", "name": "××¤×ª ××ª×¨", "url": "https://fly-tlv.com/sitemap.xml?lang=he" } },
        { "@type": "ListItem", "position": 29, "item": { "@type": "SiteNavigationElement", "name": "RSS Feed", "url": "https://fly-tlv.com/rss.xml" } }
      ]
    }

  ]
}
</script>


{% endblock %}
{% block content %}

<!-- Hero Section -->
<div class="hero-section text-center py-5 shadow-sm mb-4" lang="{{ lang }}"
  dir="{{ 'rtl' if lang == 'he' else 'ltr' }}">
  <div class="container position-relative z-1">
    <h1 class="fw-bold mb-2">
      {% if lang == 'he' %}ğŸŒ ××–×”×¨×•×ª ××¡×¢{% else %}ğŸŒ Travel Warnings{% endif %}
    </h1>
    {% if last_update %}
    <div
      class="last-update-badge mt-2 d-inline-flex align-items-center bg-white bg-opacity-50 text-dark border border-white border-opacity-25 shadow-sm">
      <i class="bi bi-clock-history"></i>
      <span class="label-text">
        {% if lang == 'he' %}×¢×•×“×›×Ÿ ×œ××—×¨×•× ×”:{% else %}Last update:{% endif %}
      </span>
      <strong>{{ last_update }}</strong>
    </div>
    {% endif %}
  </div>
</div>

<div class="container py-4" lang="{{ lang }}" dir="{{ 'rtl' if lang == 'he' else 'ltr' }}">
  <!-- Breadcrumbs -->
  <nav aria-label="breadcrumb" class="mb-4 text-start" dir="{{ 'rtl' if lang == 'he' else 'ltr' }}">
    <ol class="breadcrumb mb-0">
      <li class="breadcrumb-item">
        <a href="/{{ '' if lang != 'he' else '?lang=he' }}">
          {{ 'Home' if lang != 'he' else '×‘×™×ª' }}
        </a>
      </li>
      <li class="breadcrumb-item active" aria-current="page">
        {{ 'Travel Warnings' if lang != 'he' else '××–×”×¨×•×ª ××¡×¢' }}
      </li>
    </ol>
  </nav>

  <!-- Search & Filter Card -->
  <div class="card shadow-sm mb-4 text-start">
    <div class="card-header fw-semibold">
      {% if lang == 'he' %} ×—×™×¤×•×© ×•×¡×™× ×•×Ÿ {% else %} Search & Filter {% endif %}
    </div>
    <div class="card-body">
      <div class="row g-3">
        <div class="col-md-3">
          <label for="continent-filter" class="form-label">
            {% if lang == 'he' %} ×™×‘×©×ª {% else %} Continent {% endif %}
          </label>
          <select id="continent-filter" class="form-select">
            <option value="">{% if lang == 'he' %} ×”×¦×’ ×”×›×œ {% else %} Show All {% endif %}</option>
            {% for c in continents %}
            <option value="{{ c }}">{{ c }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="col-md-3">
          <label for="country-filter" class="form-label">
            {% if lang == 'he' %} ××“×™× ×” {% else %} Country {% endif %}
          </label>
          <select id="country-filter" class="form-select">
            <option value="">{% if lang == 'he' %} ×”×¦×’ ×”×›×œ {% else %} Show All {% endif %}</option>
            {% for c in countries %}
            <option value="{{ c }}">{{ c }}</option>
            {% endfor %}
          </select>
        </div>

        <div class="col-md-3">
          <label for="level-filter" class="form-label">
            {% if lang == 'he' %} ×¨××ª ××™×•× {% else %} Threat Level {% endif %}
          </label>
          <select id="level-filter" class="form-select">
            <option value="">{% if lang == 'he' %} ×”×¦×’ ×”×›×œ {% else %} Show All {% endif %}</option>
            <option value="High">{% if lang == 'he' %}×’×‘×•×”{% else %}High{% endif %}</option>
            <option value="Medium">{% if lang == 'he' %}×‘×™× ×•× ×™{% else %}Medium{% endif %}</option>
            <option value="Low">{% if lang == 'he' %}× ××•×š{% else %}Low{% endif %}</option>
            <option value="Unknown">{% if lang == 'he' %}×œ× ×™×“×•×¢{% else %}Unknown{% endif %}</option>
          </select>
        </div>

        <div class="col-md-3">
          <label for="query-filter" class="form-label">
            {% if lang == 'he' %} ×—×™×¤×•×© ×—×•×¤×©×™ {% else %} Free Search {% endif %}
          </label>
          <input type="text" id="query-filter" class="form-control"
            placeholder="{% if lang == 'he' %}×—×™×¤×•×© ×‘×”××œ×¦×•×ª, ××©×¨×“...{% else %}Search recommendations, office...{% endif %}">
        </div>
      </div>

      <div class="border-top pt-3 mt-3 d-flex gap-2 align-items-center">
        <button class="btn btn-sm btn-outline-secondary rounded-pill px-3" id="clear-filters"
          aria-label="{{ 'Clear Filters' if lang != 'he' else '××™×¤×•×¡ ×¡×™× ×•×Ÿ' }}">
          <i class="bi bi-x-circle me-1"></i>
          {{ 'Clear' if lang != 'he' else '××™×¤×•×¡' }}
        </button>
        <span class="ms-auto text-muted small" id="active-filters">
          {{ 'No filters applied' if lang != 'he' else '×œ×œ× ×¡×™× ×•×Ÿ' }}
        </span>
      </div>
    </div>
  </div>


  <!-- Table Card -->
  <div class="card shadow-sm text-start">
    <div class="card-body p-2 p-md-3">
      <div class="table-responsive">
        <table id="warnings-table" class="styled-table table table-striped table-hover w-100 align-middle">
          <thead class="table-primary">
            <tr>
              <th scope="col">{{ 'Continent' if lang != 'he' else '×™×‘×©×ª' }}</th>
              <th scope="col">{{ 'Country' if lang != 'he' else '××“×™× ×”' }}</th>
              <th scope="col">{{ 'Threat Level' if lang != 'he' else '×¨××ª ××™×•×' }}</th>
              <th scope="col">{{ 'Recommendations' if lang != 'he' else '×”××œ×¦×•×ª' }}</th>
              <th scope="col">{{ 'Link' if lang != 'he' else '×œ×™× ×§' }}</th>
            </tr>
          </thead>
          <tbody>
            {% for w in warnings %}
            {% set level_value = (
            "High" if w.level == "High" else
            "Medium" if w.level == "Medium" else
            "Low" if w.level == "Low" else
            "Unknown"
            ) %}
            <tr>
              <td>{{ w.continent }}</td>
              <td class="dtr-control">{{ w.country }}</td>

              <td>
                <span class="search-text d-none">{{ level_value }}</span>
                {% if level_value == "High" %}
                <span class="flight-status-badge badge bg-danger">×’×‘×•×”</span>
                {% elif level_value == "Medium" %}
                <span class="flight-status-badge badge bg-warning text-dark">×‘×™× ×•× ×™</span>
                {% elif level_value == "Low" %}
                <span class="flight-status-badge badge bg-success">× ××•×š</span>
                {% else %}
                <span class="flight-status-badge badge bg-secondary">×œ× ×™×“×•×¢</span>
                {% endif %}
              </td>
              <td>{{ w.recommendations }}</td>
              <td>
                {% if w.details_url %}
                <a href="{{ w.details_url }}" target="_blank" class="btn btn-sm btn-primary rounded-pill px-3">×¤×¨×˜×™×</a>
                {% else %}â€”{% endif %}
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const isMobile = window.innerWidth <= 768;
    const currentLang = "{{ lang }}";
    const table = $('#warnings-table').DataTable({
      pageLength: 25,
      responsive: {
        details: {
          type: 'column',     // arrow in a column
          target: 1           // ğŸŸ¢ Country column gets the arrow
        }
      },

      searching: true,
      dom: 'Bfrtip',
      pagingType: "simple",
      buttons: isMobile ? [] : [
        {
          extend: 'copyHtml5',
          text: `<i class="bi bi-clipboard me-1"></i> {{ 'Copy' if lang != 'he' else '×”×¢×ª×§' }}`,
          className: 'btn btn-primary btn-sm'
        },

        {
          extend: 'excelHtml5',
          text: `<i class="bi bi-file-earmark-excel me-1"></i> Excel`,
          className: 'btn btn-success btn-sm'
        },
        {
          extend: 'pdfHtml5',
          text: `<i class="bi bi-file-earmark-pdf me-1"></i> PDF`,
          className: 'btn btn-danger btn-sm'
        },
        {
          extend: 'print',
          text: `<i class="bi bi-printer me-1"></i> {{ 'Print' if lang != 'he' else '×”×“×¤×¡×”' }}`,
          className: 'btn btn-secondary btn-sm'
        },
      ],

      language: {
        url: "{{ 'https://cdn.datatables.net/plug-ins/1.13.8/i18n/he.json' if lang == 'he' else 'https://cdn.datatables.net/plug-ins/1.13.8/i18n/en-GB.json' }}",
        infoFiltered: ""
      },
      columnDefs: [{
        targets: 2,
        render: function (data, type, row, meta) {
          if (type === 'display') return data;
          const div = document.createElement('div');
          div.innerHTML = data;
          const hidden = div.querySelector('.search-text');
          return hidden ? hidden.textContent.trim() : '';
        }
      }]
    });

    // Update "Active Filters" label
    function updateActiveFilters() {
      const continent = $('#continent-filter').val();
      const country = $('#country-filter').val();
      const level = $('#level-filter').val();
      const query = $('#query-filter').val();

      let filters = [];
      if (continent) filters.push(`×™×‘×©×ª: ${continent}`);
      if (country) filters.push(`××“×™× ×”: ${country}`);
      if (level) filters.push(`×¨××ª ××™×•×: ${level}`);
      if (query) filters.push(`×—×™×¤×•×©: ${query}`);
      const noFiltersText = currentLang === 'he' ? '×œ×œ× ×¡×™× ×•×Ÿ' : 'No filters applied';
      $('#active-filters').text(filters.length ? filters.join(" | ") : noFiltersText);
    }

    // Filters
    $('#continent-filter').on('change', function () {
      table.column(0).search(this.value || '').draw();
      updateActiveFilters();
    });

    $('#country-filter').on('change', function () {
      table.column(1).search(this.value || '').draw();
      updateActiveFilters();
    });

    $('#level-filter').on('change', function () {
      const searchTerm = this.value || '';
      table.column(2).search(searchTerm).draw();
      updateActiveFilters();
    });

    $('#query-filter').on('keyup change', function () {
      table.search(this.value).draw();
      updateActiveFilters();
    });

    $('#clear-filters').on('click', function () {
      $('#continent-filter, #country-filter, #level-filter').val('');
      $('#query-filter').val('');
      table.search('').columns().search('').draw();
      updateActiveFilters();
    });

    // Initial run
    updateActiveFilters();
  });
</script>
{% endblock %}
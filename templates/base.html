<!DOCTYPE html>
<html lang="{{ lang | default('en') }}" dir="{{ 'rtl' if lang == 'he' else 'ltr' }}">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />  
  <title>{{ title | default("Fly TLV → Worldwide Destinations") }}</title>
  <meta name="description" content="{{ description | default('Explore all direct destinations from Tel Aviv (TLV) worldwide — schedules, airlines, maps, and travel insights.') }}">
  <meta name="keywords" content="flights, Tel Aviv, TLV, destinations, airports, airlines, worldwide travel" />
  <meta name="robots" content="index,follow" />

  <!-- Favicon -->
  <link rel="icon" href="/static/favicon.ico" />
  	<!-- Standard favicon (still needed) -->
	<link rel="manifest" href="/manifest.json">
	<link rel="icon" type="image/png" sizes="32x32" href="/static/icons/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/static/icons/favicon-16x16.png">
	<!-- Android Chrome / PWA -->
	<link rel="icon" type="image/png" sizes="192x192" href="/static/icons/icon-192x192.png">
	<link rel="icon" type="image/png" sizes="512x512" href="/static/icons/icon-512x512.png">
	<!-- iOS Safari (Home Screen icon) -->
	<link rel="apple-touch-icon" sizes="180x180" href="/static/icons/apple-touch-icon.png">

  <!-- Canonical & Hreflang -->
  <link rel="canonical" href="https://fly-tlv.com{{ request.url.path }}{{ '?lang=he' if lang == 'he' else '' }}" />
  <link rel="alternate" href="https://fly-tlv.com/" hreflang="en" />
  <link rel="alternate" href="https://fly-tlv.com/?lang=he" hreflang="he" />
  <link rel="alternate" href="https://fly-tlv.com/" hreflang="x-default" />

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://fly-tlv.com/" />
  <meta property="og:title" content="{{ title | default('Flights Explorer — All TLV Destinations Worldwide') }}" />
  <meta property="og:description" content="{{ description | default('Discover all direct destinations from Tel Aviv (TLV) across the globe with maps, airlines, and travel details.') }}" />
  <meta property="og:image" content="https://fly-tlv.com/static/og/flytlv_world.jpg" />
  <meta property="og:image:alt" content="{{ 'Map of worldwide destinations from Tel Aviv (TLV)' if lang != 'he' else 'מפת כל היעדים בעולם מתל אביב' }}" />

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="{{ title | default('Flights Explorer — All TLV Destinations Worldwide') }}" />
  <meta name="twitter:description" content="{{ description | default('Direct worldwide destinations from Tel Aviv (TLV) with airlines, maps, and travel insights.') }}" />
  <meta name="twitter:image" content="https://fly-tlv.com/static/og/flytlv_world.jpg" />
  <meta name="twitter:image:alt" content="{{ 'Map of worldwide destinations from Tel Aviv (TLV)' if lang != 'he' else 'מפת כל היעדים בעולם מתל אביב' }}" />

  <!-- Ads -->
  <meta name="google-adsense-account" content="ca-pub-7964221655161384" />
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7964221655161384" crossorigin="anonymous"></script>

  <!-- CSS -->
  <link rel="stylesheet" href="{{ url_for('static', path='css/app.css') }}?v={{ time.time() }}">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" />
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.8/css/jquery.dataTables.min.css" />
  <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.4.2/css/buttons.bootstrap5.min.css" />

  <!-- JS -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.8/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/buttons/2.4.2/js/dataTables.buttons.min.js"></script>
  <script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.bootstrap5.min.js"></script>
  <script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.html5.min.js"></script>
  <script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.colVis.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/pdfmake.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/vfs_fonts.js"></script>
  <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.print.min.js"></script>


  <!-- Structured Data: Dataset -->
<script type="application/ld+json">
[
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Fly TLV — Worldwide Destinations Explorer",
    "url": "https://fly-tlv.com/",
    "inLanguage": "en-US",
    "description": "Explore all destinations worldwide from Tel Aviv (TLV) with airlines, maps, distances, and travel data."
  },
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Fly TLV — כל היעדים מתל אביב",
    "url": "https://fly-tlv.com/?lang=he",
    "inLanguage": "he-IL",
    "description": "גלה את כל היעדים בעולם מתל אביב (TLV): חברות תעופה, מפות, מרחקים ונתוני טיסה."
  },

  { "@context": "https://schema.org", "@type": "SiteNavigationElement", "name": "Home", "url": "https://fly-tlv.com/" },
  { "@context": "https://schema.org", "@type": "SiteNavigationElement", "name": "בית", "url": "https://fly-tlv.com/?lang=he" },

  { "@context": "https://schema.org", "@type": "SiteNavigationElement", "name": "Stats", "url": "https://fly-tlv.com/stats" },
  { "@context": "https://schema.org", "@type": "SiteNavigationElement", "name": "נתוני שדה", "url": "https://fly-tlv.com/stats?lang=he" },

  { "@context": "https://schema.org", "@type": "SiteNavigationElement", "name": "Flights", "url": "https://fly-tlv.com/flights" },
  { "@context": "https://schema.org", "@type": "SiteNavigationElement", "name": "טיסות", "url": "https://fly-tlv.com/flights?lang=he" },

  { "@context": "https://schema.org", "@type": "SiteNavigationElement", "name": "World Map", "url": "https://fly-tlv.com/map" },
  { "@context": "https://schema.org", "@type": "SiteNavigationElement", "name": "מפת יעדים", "url": "https://fly-tlv.com/map?lang=he" },

  { "@context": "https://schema.org", "@type": "SiteNavigationElement", "name": "Travel Warnings", "url": "https://fly-tlv.com/travel-warnings" },
  { "@context": "https://schema.org", "@type": "SiteNavigationElement", "name": "אזהרות מסע", "url": "https://fly-tlv.com/travel-warnings?lang=he" },

  { "@context": "https://schema.org", "@type": "SiteNavigationElement", "name": "Chat", "url": "https://fly-tlv.com/chat" },
  { "@context": "https://schema.org", "@type": "SiteNavigationElement", "name": "צ׳אט", "url": "https://fly-tlv.com/chat?lang=he" },

  { "@context": "https://schema.org", "@type": "SiteNavigationElement", "name": "About", "url": "https://fly-tlv.com/about" },
  { "@context": "https://schema.org", "@type": "SiteNavigationElement", "name": "עלינו", "url": "https://fly-tlv.com/about?lang=he" },

  { "@context": "https://schema.org", "@type": "SiteNavigationElement", "name": "Direct vs Nonstop", "url": "https://fly-tlv.com/direct-vs-nonstop" },
  { "@context": "https://schema.org", "@type": "SiteNavigationElement", "name": "ישיר מול ללא-עצירות", "url": "https://fly-tlv.com/direct-vs-nonstop?lang=he" },

  { "@context": "https://schema.org", "@type": "SiteNavigationElement", "name": "Glossary", "url": "https://fly-tlv.com/glossary" },
  { "@context": "https://schema.org", "@type": "SiteNavigationElement", "name": "מילון מונחים", "url": "https://fly-tlv.com/glossary?lang=he" },

  { "@context": "https://schema.org", "@type": "SiteNavigationElement", "name": "Privacy Policy", "url": "https://fly-tlv.com/privacy" },
  { "@context": "https://schema.org", "@type": "SiteNavigationElement", "name": "מדיניות פרטיות", "url": "https://fly-tlv.com/privacy?lang=he" },

  { "@context": "https://schema.org", "@type": "SiteNavigationElement", "name": "Accessibility", "url": "https://fly-tlv.com/accessibility" },
  { "@context": "https://schema.org", "@type": "SiteNavigationElement", "name": "נגישות", "url": "https://fly-tlv.com/accessibility?lang=he" },

  { "@context": "https://schema.org", "@type": "SiteNavigationElement", "name": "Contact", "url": "https://fly-tlv.com/contact" },
  { "@context": "https://schema.org", "@type": "SiteNavigationElement", "name": "צור קשר", "url": "https://fly-tlv.com/contact?lang=he" },

  { "@context": "https://schema.org", "@type": "SiteNavigationElement", "name": "Sitemap", "url": "https://fly-tlv.com/sitemap.xml" },
  { "@context": "https://schema.org", "@type": "SiteNavigationElement", "name": "מפת אתר", "url": "https://fly-tlv.com/sitemap.xml?lang=he" }
]
</script>
<style>
#brand-title {
  font-size: 1.5rem;
  font-weight: 600;
  white-space: nowrap;
}

/* Mobile (≤576px) */
@media (max-width: 576px) {
  .navbar .container {
    flex-direction: column !important;
    align-items: center !important;
    text-align: center;
  }

  #brand-title {
    font-size: 1.2rem;
    justify-content: center;
  }
}

/* Tiny screens (≤400px) */
@media (max-width: 400px) {
  #brand-title {
    font-size: 1rem;
  }
}
/* Global override for all dark mode text */
body.dark-mode, 
body.dark-mode * {
  color: #ffffff !important;
}

/* Fix Bootstrap badges and nav background */
body.dark-mode .bg-light,
body.dark-mode .bg-body,
body.dark-mode .navbar,
body.dark-mode .card-header,
body.dark-mode .badge,
body.dark-mode .footer-bg {
  background-color: #1f1f1f !important;
  color: #ffffff !important;
}

/* Fix Bootstrap class overrides */
body.dark-mode .text-dark {
  color: #ffffff !important;
}
body.dark-mode .text-muted {
  color: #b0b0b0 !important;
}

</style>

</head>

<body>
  <!-- ✅ NAVBAR -->
  <nav class="navbar navbar-expand-lg border-bottom sticky-top bg-body">
    <div class="container-fluid">
      <a id="brand-title" class="navbar-brand d-flex align-items-center" href="/">
        <i class="bi bi-airplane-engines me-2"></i>Fly TLV → Worldwide Destinations
      </a>
<div class="d-flex align-items-center justify-content-center gap-2">
<button id="view-map-btn" class="btn btn-outline-primary">
  <i class="bi bi-globe-americas me-1"></i> 
  {{ 'View Map' if lang != 'he' else 'צפה במפה' }}
</button>

<button id="ai-chat-btn" class="btn btn-outline-primary" type="button">
  <i class="bi bi-robot me-1"></i> 
  {{ 'Ask AI' if lang != 'he' else 'שאל את הבוט' }}
</button>

<button id="theme-toggle" class="btn btn-outline-primary" type="button" aria-label="Toggle theme">
  <i id="theme-icon" class="bi bi-moon-stars me-1"></i> 
  {{ 'Theme' if lang != 'he' else 'ערכת נושא' }}
</button>

<button id="lang-toggle" class="btn btn-outline-primary" type="button" aria-label="Toggle language">
  <i class="bi bi-translate me-1"></i> 
  <span id="lang-label">{{ 'עברית' if lang != 'he' else 'English' }}</span>
</button>
</div>
    </div>
  </nav>

  <!-- ✅ MAIN CONTENT -->
  <main class="container-fluid mt-4 px-3" role="main">
    {% block content %}{% endblock %}
  </main>

<!-- ✅ FOOTER -->
<footer class="mt-3 border-top footer-bg">
  <!-- First container -->
  <div class="container py-4 d-flex flex-column flex-md-row align-items-center justify-content-between">
    <div class="mb-3 mb-md-0">
      <div class="d-flex align-items-center">
        <i class="bi bi-airplane-engines text-primary me-3 fs-5"></i>
        <span id="footer-brand" class="fw-semibold">
          {{ "Fly TLV → Worldwide Destinations" if lang != 'he' else "TLV → מגלה יעדים בעולם" }}
        </span>
      </div>
      <div id="footer-tagline" class="small text-muted mt-1">
        {{ "Real routes, distances & estimated flight times." if lang != 'he' else "נתיבי טיסה אמיתיים, מרחקים וזמני טיסה משוערים." }}
      </div>
    </div>

    <div class="col-md-7">
      <div id="footer-marketing">
        {% if lang == "he" %}
        ✈️ <strong>הדרך החכמה לגלות יעדים ישירים מתל אביב (TLV)</strong><br>
        חיפוש טיסות יכול להיות מבלבל — אילו חברות באמת מפעילות את הקו, באילו ימים ניתן לטוס, והאם זו טיסה ישירה או רק קוד־שייר.
		<br>
        ב־<a href="https://fly-tlv.com" class="fw-bold text-decoration-none" target="_blank" rel="noopener">Fly-TLV.com</a>
        אנחנו עושים את זה פשוט: מבט ברור על כל היעדים הישירים מנתב״ג — כולל חברות תעופה, לוחות זמנים, מרחקים וזמני טיסה משוערים.  
        כל המידע במקום אחד, כדי שתוכלו לתכנן את הטיול הבא שלכם בביטחון.
        {% else %}
        ✈️ <strong>The smart way to explore direct destinations from Tel Aviv (TLV)</strong><br>
        Finding the right destination can be confusing — which airlines actually serve the route, on what days, and whether it’s truly non-stop or just a codeshare.
		<br>
        At <a href="https://fly-tlv.com" class="fw-bold text-decoration-none" target="_blank" rel="noopener">Fly-TLV.com</a>,
        we make it simple: a clear overview of all nonstop destinations from Ben Gurion Airport — including airlines, schedules, distances, and estimated flight times.  
        Everything in one place, so you can plan your next trip with confidence.
        {% endif %}
      </div>
    </div>
  </div> <!-- ✅ closes first .container -->

<!-- 📦 Organized Footer Navigation -->
  <!-- Second container for nav -->
  <div class="container">
    <nav class="footer-nav small mb-3 mb-md-0" aria-label="Footer navigation">
	  <a href="/{{ '' if lang != 'he' else '?lang=he' }}" class="footer-link" rel="home">
	  {% if lang == 'he' %}דף הבית{% else %}Home{% endif %}</a>
	  <a href="/about{{ '?lang=he' if lang == 'he' else '' }}" class="footer-link">{{ "About" if lang == "en" else "עלינו" }}</a>
      <a href="/accessibility{{ '?lang=he' if lang == 'he' else '' }}" class="footer-link">{{ "Accessibility" if lang == "en" else "נגישות" }}</a>
      <a href="/privacy{{ '?lang=he' if lang == 'he' else '' }}" class="footer-link">{{ "Privacy" if lang == "en" else "פרטיות" }}</a>
      <a href="/contact{{ '?lang=he' if lang == 'he' else '' }}" class="footer-link">{{ "Contact" if lang == "en" else "צור קשר" }}</a>
      <a href="/chat{{ '?lang=he' if lang == 'he' else '' }}" class="footer-link">{{ "AI Bot" if lang == "en" else "בוט AI" }}</a>
      <a href="/flights{{ '?lang=he' if lang == 'he' else '' }}" class="footer-link">{{ "Flights" if lang == "en" else "טיסות" }}</a>      
      <a href="/travel-warnings{{ '?lang=he' if lang == 'he' else '' }}" class="footer-link">{{ "Travel Warnings" if lang == "en" else "אזהרות מסע" }}</a>
      <a href="/map{{ '?lang=he' if lang == 'he' else '' }}" class="footer-link">{{ "Map" if lang == "en" else "מפה" }}</a>      
      <a href="/sitemap.xml" class="footer-link" rel="sitemap">{{ "Sitemap" if lang == "en" else "מפת האתר" }}</a>      
      <a href="/glossary{{ '?lang=he' if lang == 'he' else '' }}" class="footer-link" rel="glossary">{{ "Glossary" if lang == "en" else "מושגים" }}</a>      
      <a href="/stats{{ '?lang=he' if lang == 'he' else '' }}" class="footer-link" rel="statistics">{{ "Statistics" if lang == "en" else "סטטיסטיקה" }}</a>	  
	  <a href="/direct-vs-nonstop{{ '?lang=he' if lang == 'he' else '' }}" class="footer-link" rel="direct-vs-nonstop">{{ "Direct vs Nonstop" if lang == "en" else "ישיר מול ללא-עצירות" }}</a>
    </nav>
  </div>

  <!-- Bottom bar -->
<div class="footer-bottom py-2">
  <div class="container small text-center text-muted">
    <p class="mb-2 fw-bold text-muted" style="font-size: 1.0rem;">
      {% if lang == "he" %}
        ⚠️ שימו לב: הנתונים המוצגים באתר זה הינם הערכה בלבד ובפועל תלויים בגורמים שונים שאינם בידיעתנו.
        .יש לפעול לפי הוראות חברות התעופה והרשויות הרלוונטיות ואין להסתמך על המידע המופיע באתר שהינו בגדר המלצה בלבד
      {% else %}
        ⚠️ Note: The information presented on this site is an estimate only and may vary depending on factors beyond our knowledge.
        Please follow airline and government authority instructions. Do not rely solely on the information here, which is provided for guidance only.
      {% endif %}
    </p>

    <!-- New line for copyright info -->
    <div class="text-muted" style="font-size: 0.9rem;">
      © <span id="footer-year"></span>
      <span id="footer-brand-inline">
        <a href="https://fly-tlv.com" class="footer-link" target="_blank" rel="noopener">
          {{ "Fly TLV → Worldwide Destinations" if lang != "he" else "TLV → כל היעדים הישירים בעולם" }}
        </a>
      </span>
      <br />
      <span id="footer-rights">
        {{ "All rights reserved" if lang != "he" else "כל הזכויות שמורות" }}
      </span>
    </div>
  </div>
</div>
<div id="install-app-container">
  <div class="install-app-inner">
    <button id="install-app-btn" aria-label="Install Fly-Tlv App">
      📲 Install Fly-Tlv App 📲
    </button>    
  </div>
</div>
</footer>





  <!-- ✅ JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const btn = document.getElementById('theme-toggle');
      const icon = document.getElementById('theme-icon');
      const saved = localStorage.getItem('theme') || 'light';

      if (saved === 'dark') {
        document.body.classList.add('dark-mode');
        icon.className = 'bi bi-sun';
      }

      btn.addEventListener('click', () => {
        const dark = document.body.classList.toggle('dark-mode');
        localStorage.setItem('theme', dark ? 'dark' : 'light');
        icon.className = dark ? 'bi bi-sun' : 'bi bi-moon-stars';
      });
    });
  </script>
  <script>
document.addEventListener('DOMContentLoaded', () => {
  const mapModal = document.getElementById('mapModal');
  const iframe   = document.getElementById('map-frame');

  // Bootstrap event when modal is shown
  mapModal.addEventListener('shown.bs.modal', () => {
    if (!iframe.src) {
      iframe.src = iframe.dataset.src;
    }
  });

  // Optional: unload map when modal is closed (prevents multiple /map reloads in background)
  mapModal.addEventListener('hidden.bs.modal', () => {
    iframe.removeAttribute('src');
  });
});
</script>
  <!-- ✅ Map Modal -->
<div class="modal fade" id="mapModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-xl" style="max-width:95%">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">
          <i class="bi bi-map me-2"></i>
          <span id="map-title">Flight Map</span>
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" style="height:80vh;overflow:hidden;padding:0">
        <iframe id="map-frame" data-src="/map" width="100%" height="100%" frameborder="0"></iframe>
      </div>
    </div>
  </div>
</div>
  {% block scripts %}{% endblock %}
  <script>
  if ("serviceWorker" in navigator) {
    window.addEventListener("load", () => {
      navigator.serviceWorker.register("/sw.js")
        .then((reg) => {
          console.log("✅ Service Worker registered:", reg.scope);
        })
        .catch((err) => {
          console.error("❌ Service Worker registration failed:", err);
        });
    });
  }
</script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  // MAP BUTTON -> show map modal
  const mapBtn = document.getElementById('view-map-btn');
  if (mapBtn) {
    mapBtn.addEventListener('click', () => {
      const mapModal = new bootstrap.Modal(document.getElementById('mapModal'));
      mapModal.show();
    });
  }

  // AI BUTTON -> redirect to chat
  const aiBtn = document.getElementById('ai-chat-btn');
  if (aiBtn) {
    aiBtn.addEventListener('click', () => {
      const lang = document.documentElement.getAttribute('lang');
      window.location.href = lang === 'he' ? '/chat?lang=he' : '/chat';
    });
  }

  // LANGUAGE BUTTON -> toggle lang param in URL
  const langBtn = document.getElementById('lang-toggle');
  if (langBtn) {
    langBtn.addEventListener('click', () => {
      const currentLang = document.documentElement.getAttribute('lang') || 'en';
      const newLang = currentLang === 'he' ? 'en' : 'he';

      const url = new URL(window.location.href);
      if (newLang === 'he') {
        url.searchParams.set('lang', 'he');
      } else {
        url.searchParams.delete('lang');
      }
      window.location.href = url.toString();
    });
  }
});
</script>
<script>
(function() {
  const url = new URL(window.location.href);
  const urlLang = url.searchParams.get('lang');
  const storedLang = localStorage.getItem('fe-lang');

  if (!urlLang && storedLang === 'he') {
    // Reload page with lang=he
    url.searchParams.set('lang', 'he');
    window.location.replace(url.toString());
  }
})();
</script>


</body>
</html>

{% extends "base.html" %}

{% block content %}
<div class="container mt-5 fade-in">
  <div class="row justify-content-center">
    <div class="col-md-9 col-lg-8">
      
      <div class="card shadow-lg border-0">
        <div class="card-body text-center p-5">

          <!-- ICON -->
          {% if status_code == 404 %}
            <i class="bi bi-airplane-engines display-1 text-primary mb-4"></i>
          {% elif status_code == 500 %}
            <i class="bi bi-bug-fill display-1 text-danger mb-4"></i>
          {% else %}
            <i class="bi bi-exclamation-triangle-fill display-1 text-warning mb-4"></i>
          {% endif %}

          <!-- TITLE -->
          <h2 class="fw-bold mb-3">
            {% if status_code == 404 %}
              {{ "Destination Not Found" if lang != "he" else "×”×™×¢×“ ×œ× × ××¦×" }}
            {% elif status_code == 500 %}
              {{ "Internal Server Error" if lang != "he" else "×©×’×™××ª ×©×¨×ª ×¤× ×™××™×ª" }}
            {% else %}
              {{ "Oops! Something went wrong" if lang != "he" else "××•×¤×¡! ××©×”×• ×”×©×ª×‘×©" }}
            {% endif %}
          </h2>

          <!-- FUNNY MESSAGES FOR INVALID DESTINATIONS -->
          {% if invalid_iata %}
            
            {% if lang != "he" %}
              {% set funny = [
                "This destination doesnâ€™t seem to exist from Tel Avivâ€¦ unless you have a private jet! ğŸ˜‰",
                "We checked the runways. Nope, still no flights to this place.",
                "Great imagination! Sadly, no airline flies there from TLV.",
                "We searched the entire departure boardâ€¦ nothing. Try a real destination?",
                "If TLV ever opens flights to this destination, we pinky-promise to add it!"
              ] %}
            {% else %}
              {% set funny = [
                "×”×™×¢×“ ×”×–×” ×œ× ×§×™×™× ×× ×ª×‘\"×’â€¦ ××œ× ×× ×™×© ×œ×š ××˜×•×¡ ×¤×¨×˜×™! ğŸ˜‰",
                "×‘×“×§× ×• ××ª ×›×œ ×œ×•×— ×”×˜×™×¡×•×ª â€” ××™×Ÿ ×˜×™×¡×•×ª ×œ×™×¢×“ ×”×–×”.",
                "×“××™×•×Ÿ ××¤×•×ª×— ×–×” ××¢×•×œ×”â€¦ ××‘×œ ××™×Ÿ ×˜×™×¡×•×ª ×œ×©×.",
                "×œ× ××¦×× ×• ×˜×™×¡×” ×œ×™×¢×“ ×”×–×”. ××•×œ×™ ×ª×‘×—×¨ ×™×¢×“ ×××™×ª×™?",
                "×× ×ª×”×™×” ×˜×™×¡×” ××”×™×¢×“ ×”×–×” ××ª\"× â€” ×× ×—× ×• ××•×¡×™×¤×™× ××™×“!"
              ] %}
            {% endif %}

            <p class="fs-5 text-muted mb-4">{{ funny | random }}</p>

          {% else %}
            <!-- Regular error message -->
            <p class="fs-5 text-muted mb-4">
              {{ message if message else (
                  "The page you requested could not be found." if status_code == 404 else
                  "The server encountered an error. Please try again later." if status_code == 500 else
                  "An unexpected error occurred. Please try again later."
              ) if lang != "he" else (
                  "×”×“×£ ×©×—×™×¤×©×ª ×œ× × ××¦×." if status_code == 404 else
                  "××™×¨×¢×” ×©×’×™××ª ×©×¨×ª ×¤× ×™××™×ª. × ×¡×” ×©×•×‘ ×××•×—×¨ ×™×•×ª×¨." if status_code == 500 else
                  "××™×¨×¢×” ×©×’×™××” ×œ× ×¦×¤×•×™×”. × ×¡×” ×©×•×‘ ×××•×—×¨ ×™×•×ª×¨."
              ) }}
            </p>
          {% endif %}

          <!-- Redirection Notice -->
          <p class="text-muted small mb-4">
            {% if lang != "he" %}
              Redirecting to homepage in 5 secondsâ€¦
            {% else %}
              ××¢×‘×™×¨ ×œ×“×£ ×”×‘×™×ª ×‘×¢×•×“ 5 ×©× ×™×•×ªâ€¦
            {% endif %}
          </p>

          <hr class="my-4">

          <!-- BUTTONS -->
          <div class="d-flex justify-content-center gap-3 flex-wrap">
            <a href="/" class="btn btn-primary btn-lg">
              <i class="bi bi-house-door"></i> {{ "Home" if lang != "he" else "×“×£ ×”×‘×™×ª" }}
            </a>
            <button class="btn btn-outline-secondary btn-lg" onclick="history.back()">
              <i class="bi bi-arrow-left-circle"></i> {{ "Back" if lang != "he" else "×—×–×¨×”" }}
            </button>
          </div>

        </div>
      </div>

    </div>
  </div>
</div>

<!-- Redirect Script -->
<script>
  setTimeout(() => window.location.href = "/", 5000);
</script>

<!-- Simple animation -->
<style>
.fade-in { animation: fadein 0.5s ease-in-out; }
@keyframes fadein { from { opacity: 0; } to { opacity: 1; } }
</style>

{% endblock %}
